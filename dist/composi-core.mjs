var a=0,b=3,c={},d=[],e=[];function f(a,b,c,d){var e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null,f=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null;return{type:a,props:b,children:c,node:d,flag:f,key:e}}function g(a,e){return f(a,c,d,e,null,b)}function i(a,b){b=b||{};for(var c,d=[],e=[],h=arguments.length,i=Array(2<h?h-2:0),j=2;j<h;j++)i[j-2]=arguments[j];for(var k=i.length,l=b.key;0<k--;)d.push(i[k]);for(b.children&&(0>=d.length&&d.push(b.children),delete b.children);0<d.length;)if(Array.isArray(c=d.pop()))for(var m=c.length;0<m--;)d.push(c[m]);else if(!1===c||!0===c||null==c);else e.push("object"==typeof c?c:g(c));return"function"==typeof a?a(b,e):f(a,b,e,null,l)}function h(a,b){return JSON.stringify(a)!==JSON.stringify(b)}function j(c,a){return Object.assign({},c,a)}function k(a){this.handlers[a.type](a)}function l(a,b,c,d,e){if("key"===b);else if("style"===b&&"object"==typeof d)for(var f in j(c,d)){var g=null==d||null==d[f]?"":d[f];"-"===f[0]?a[b].setProperty(f,g):a[b][f]=g}else"o"===b[0]&&"n"===b[1]?((a.handlers||(a.handlers={}))[b=b.slice(2).toLowerCase()]=d)?!c&&a.addEventListener(b,k):a.removeEventListener(b,k):"list"!==b&&"form"!==b&&"type"!==b&&"draggable"!==b&&"spellcheck"!==b&&b in a&&!e?a[b]=null==d?"":d:null==d||!1===d?a.removeAttribute(b):a.setAttribute(b,d)}function m(a,c,d){var e=a.type,f=a.flag===b?document.createTextNode(e):(d=d||"svg"===e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e),g=a.props;for(var h in g.onmount&&c.push(function(){g.onmount(f)}),g)l(f,h,null,g[h],d);for(var j=0,k=a.children.length;j<k;j++)f.appendChild(m(a.children[j],c,d));return a.node=f}function n(a){return null==a?null:a.key}function o(a){for(var b=0,c=a.children.length;b<c;b++)o(a.children[b]);var d=a.props.ondestroy;return null!=d&&d(a.node),a.node}function p(a,b){var c=function(){a.removeChild(o(b))},d=b.props&&b.props.onunmount;null==d?c():d(b.node,c)}function q(c,d,f,g,k){if(f===g);else null!=f&&f.flag===b&&g.flag===b?f.type!==g.type&&(d.nodeValue=g.type):null==f||f.type!==g.type?(d=c.insertBefore(m(g,e,k),d),null!=f&&p(c,f)):function(){var b,c,o,r,s=f.props,t=g.props,u=f.children,v=g.children,w=0,x=0,y=u.length-1,z=v.length-1;for(var A in k=k||"svg"===g.type,j(s,t))("value"==A||"selected"==A||"checked"==A?d[A]:s[A])!==t[A]&&function(){l(d,A,s[A],t[A],k);var a=t.onupdate;null!=a&&h(s,t)&&e.push(function(){a(d,s,t)})}();for(;x<=z&&w<=y&&null!=(o=n(u[w]))&&o===n(v[x]);)q(d,u[w].node,u[w++],v[x++],k);for(;x<=z&&w<=y&&null!=(o=n(u[y]))&&o===n(v[z]);)q(d,u[y].node,u[y--],v[z--],k);if(w>y)for(;x<=z;)d.insertBefore(m(v[x++],e,k),(c=u[w])&&c.node);else if(x>z)for(;w<=y;)p(d,u[w++]);else{var i,B,C;for(i=w,B={},C={};i<=y;i++)null!=(o=u[i].key)&&(B[o]=u[i]);for(;x<=z;){if(o=n(c=u[w]),r=n(v[x]),C[o]||null!=r&&r===n(u[w+1])){null==o&&p(d,c),w++;continue}null==r||f.flag===a?(null==o&&(q(d,c&&c.node,c,v[x],k),x++),w++):(o===r?(q(d,c.node,c,v[x],k),C[r]=!0,w++):null==(b=B[r])?q(d,c&&c.node,null,v[x],k):(q(d,d.insertBefore(b.node,c&&c.node),b,v[x],k),C[r]=!0),x++)}for(;w<=y;)null==n(c=u[w++])&&p(d,c);for(var D in B)null==C[D]&&p(d,B[D])}}();return g.node=d}function r(d){return d.nodeType===b?g(d.nodeValue,d):f(d.nodeName.toLowerCase(),c,Array.prototype.map.call(d.childNodes,r),d,null,a)}function s(a,b){!a.vdom&&b.props.onmount&&e.push(function(){b.props.onmount(a)});for(var c=q(a.parentNode,a,a.vdom||r(a),b).vdom=b;0<e.length;)e.pop()();return c}function t(a,b){if(Array.isArray(a))throw"Cannot insert Fragment tag directly into DOM.";var c="";if("string"==typeof b&&(c=b,b=document.querySelector(b)),!b){var d="";c&&(d=` The selector you provided was: "${c}"`),console.error(`@composi/core Error: The second parameter for render function was invalid. Check the selector you provided and make sure that it exists in the DOM before trying to render. ${d}`)}s(b,a)}function u(a){function b(a){if(j)return c(g(d,a,b))}function c(a){a?d=a:e&&(d=e()),h&&k&&("function"==typeof h&&h(l,b),k=!1),f(d,b)}var d,e=a.init,f=a.view,g=a.update,h=a.subscriptions||a.subs,i=a.done,j=!0,k=!0,l=()=>d;return a.send=b,c(d),()=>{j&&(j=!1,i&&i(d))}}var v=Object.prototype.hasOwnProperty;function w(a){for(var b=Object.create(null),c=0,d=function(){var d=a[c];b[d]=a=>({type:d,data:a}),c++};c<a.length;)d();return{variants:b,match:function(a,b){return a.type?((a,c)=>{var d=a.type,e=v.call(b,d)&&b[d];return e(a.data,c)})(a):(console.error("The message you provided was not valid. Messages have the format: {type: 'whatever', data: 'something'}"),console.error("The tag you provided was:"),void console.dir(a))}}}function x(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=w(b),e=d.variants,f=d.match;return e.match=f,e}var y=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(a,c)=>b.map(b=>b&&b(a,c))},z=(a,b)=>Array.isArray(a)&&!b?a:b;export{i as h,t as render,u as run,x as union,y as batchEffects,z as Fragment};
//# sourceMappingURL=composi-core.mjs.map
