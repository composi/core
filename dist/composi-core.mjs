var a=0,b=3,c="http://www.w3.org/1999/xlink",d="http://www.w3.org/2000/svg",e={},f=[],g=[];function i(a,b,c,d){var e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null,f=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null;return{type:a,props:b,children:c,element:d,key:e,flag:f}}function j(a,c){return c||(c=null),i(a,e,f,c,null,b)}function k(a){for(var b,c=0;c<a.childNodes.length;c++)b=a.childNodes[c],8!==b.nodeType&&(3!==b.nodeType||/\S/.test(b.nodeValue))?1===b.nodeType&&k(b):(a.removeChild(b),c--)}function l(c){return"string"==typeof c&&(c=document.querySelector(c)),k(c),c.nodeType===b?j(c.nodeValue,c):i(c.nodeName.toLowerCase(),e,f.map.call(c.childNodes,l),c,null,a)}function m(a,b){b=b||{};for(var c,d=[],e=[],f=arguments.length,g=Array(2<f?f-2:0),h=2;h<f;h++)g[h-2]=arguments[h];for(var k=g.length,l=b.key;0<k--;)d.push(g[k]);for(b.children&&(0>=d.length&&d.push(b.children),delete b.children);0<d.length;)if(Array.isArray(c=d.pop()))for(var m=c.length;0<m--;)d.push(c[m]);else if(!1===c||!0===c||null==c);else e.push("object"==typeof c?c:j(c));return"function"==typeof a?a(b,e):i(a,b,e,null,l)}function h(...a){function c(a,b=new WeakMap){if(Object(a)!==a)return a;if(b.has(a))return b.get(a);const d=a instanceof Date?new Date(a):a instanceof RegExp?new RegExp(a.source,a.flags):a.constructor?new a.constructor:Object.create(null);return b.set(a,d),Object.assign(d,...Object.keys(a).map(d=>({[d]:c(a[d],b)})))}return(Array.isArray(a[0])?a.unshift([]):a.unshift({}),Array.isArray(a[0]))?a.reduce((d,a)=>Array.prototype.concat(d,c(a))):"object"==typeof a[0]?a.reduce((d,a)=>Object.assign(d,c(a))):void 0}const n=a=>h(a);function o(a){return a.currentTarget.events[a.type](a)}function p(a){return null==a?null:a.key}function q(a,b,c){for(var d,e,f={};b<=c;)null!=(d=(e=a[b]).key)&&(f[d]=e),b++;return f}function r(a,b,d,e,f){if("key"!==b)if("style"===b&&"object"==typeof e)for(var g in h(d,e)){var i=null==e||null==e[g]?"":e[g];"-"===g[0]?a[b].setProperty(g,i):a[b][g]=i}else if("o"===b[0]&&"n"===b[1])b=b.slice(2).toLowerCase(),a.events||(a.events={}),a.events[b]=e,null==e?a.removeEventListener(b,o):null==d&&a.addEventListener(b,o);else{"list"!==b&&"form"!==b&&"type"!==b&&"draggable"!==b&&"spellcheck"!==b&&b in a&&!f?a[b]=null==e?"":e:null==e||!1===e?a.removeAttribute(b):"xlink-href"===b||"xlinkHref"===b?(a.setAttributeNS(c,"href",e),a.setAttribute("href",e)):a.setAttribute(b,e)}}function s(a,c){var e=a.flag===b?document.createTextNode(a.type):(c=c||"svg"===a.type)?document.createElementNS(d,a.type):document.createElement(a.type);var f=a.props;f.onmount&&g.push(function(){f.onmount(e)});for(var h=0,i=a.children.length;h<i;)e.appendChild(s(a.children[h],c)),h++;for(var j in f)r(e,j,null,f[j],c);return a.element=e}function t(a){for(var b=0,c=a.children.length;b<c;)t(a.children[b]),b++;return a.element}function u(a,b){var c=function(){a.removeChild(t(b))},d=b.props&&b.props.onunmount;null==d?c():d(b.element,c)}function v(b,c,d,e){for(var f in h(c,d))("value"==f||"checked"==f||"selected"==f?b[f]:c[f])!==d[f]&&r(b,f,c[f],d[f],e);var i=b.vnode&&b.vnode.type===a?d.onmount:d.onupdate;null!=i&&(d.onmount?g.push(function(){i(b)}):g.push(function(){i(b,c,d)}))}function w(c,d,e,f,g){if(c.previousVNode&&f===c.previousVNode);else if(null!=e&&e.flag===b&&f.flag===b)e.type!==f.type&&(d.nodeValue=f.type);else if(null==e||e.type!==f.type){var h=c.insertBefore(s(f,g),d);null!=e&&u(c,e),d=h}else{v(d,e.props,f.props,g=g||"svg"===f.type);for(var i,j,k,l,m=e.children,n=0,o=m.length-1,r=f.children,t=0,x=r.length-1;t<=x&&n<=o&&(k=p(m[n]),l=p(r[t]),null!=k&&k===l);)w(d,m[n].element,m[n],r[t],g),n++,t++;for(;t<=x&&n<=o&&(k=p(m[o]),l=p(r[x]),null!=k&&k===l);)w(d,m[o].element,m[o],r[x],g),o--,x--;if(n>o)for(;t<=x;)d.insertBefore(s(r[t++],g),(j=m[n])&&j.element);else if(t>x)for(;n<=o;)u(d,m[n++]);else{for(var y=q(m,n,o),z={};t<=x;){if(k=p(j=m[n]),l=p(r[t]),z[k]||null!=l&&l===p(m[n+1])){null==k&&u(d,j),n++;continue}null==l||e.flag===a?(null==k&&(w(d,j&&j.element,j,r[t],g),t++),n++):(k===l?(w(d,j.element,j,r[t],g),z[l]=!0,n++):null==(i=y[l])?w(d,j&&j.element,null,r[t],g):(w(d,d.insertBefore(i.element,j&&j.element),i,r[t],g),z[l]=!0),t++)}for(;n<=o;)null==p(j=m[n++])&&u(d,j);for(var A in y)null==z[A]&&u(d,y[A])}}return d&&(f.element=d),f}class x{constructor(){this.message="Cannot insert Fragment tag directly into DOM.",this.toString=function(){return this.message}}}function y(a,b,c){if("string"==typeof c&&(c=document.querySelector(c)),Array.isArray(b))throw new x;if(w(c,a&&a.element,a,b),JSON.stringify(b)!==JSON.stringify(a))for(;0<g.length;)g.pop()();return b}function z(a,b,c){if(b="string"==typeof b?document.querySelector(b):b,!b)return console.error("@composi/core Error: You need to provide a valid container to render the component in. Check the element or selector you provided and make sure that it exists in the DOM before trying to render."),void console.error(`@composi/core Message: The container you provided was "${b}"`);var d,e=n(a);c?("string"==typeof c&&(c=document.querySelector(c)),d=b&&b.vnode||l(c)):d=b&&b.vnode;var f=y(d,a,b);b.vnode=f,b.previousVNode=e}function A(a,b){return B(a)||C(a,b)||D()}function B(a){if(Array.isArray(a))return a}function C(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function E(a){function b(a){if(k)return c(h(d,a,b))}function c(a){if(a){var c=A(a,2);d=c[0],e=c[1]}else if(f&&f.length){var h=A(f,2);d=h[0],e=h[1],i&&l&&("function"==typeof i&&i(m,b),l=!1)}else d=[];e&&e(d,b),g(d,b)}var d,e,f=a.init(),g=a.view,h=a.update,i=a.subscriptions||a.subs,j=a.done,k=!0,l=!0,m=()=>d;return a.send=b,c(d),()=>{k&&(k=!1,j&&j(d))}}var F=Object.prototype.hasOwnProperty;function G(a){for(var b=Object.create(null),c=a=>a&&a.type,d=(a,b)=>(d,e)=>{var f=c(d),g=F.call(a,f)&&a[f];return g?g(d.data,e):b(e)},e=0,f=function(){var c=a[e];b[c]=a=>({type:c,data:a}),e++};e<a.length;)f();return{variants:b,match:function(a,b,c){return d(b,c)(a)}}}function H(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=G(b),e=d.variants,f=d.match;return e.match=f,e}var I=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(a,c)=>b.map(b=>b&&b(a,c))},J=(a,b)=>Array.isArray(a)&&!b?a:b;export{m as h,z as render,E as run,H as union,I as batchEffects,J as Fragment};
//# sourceMappingURL=composi-core.mjs.map
