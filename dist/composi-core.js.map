{"version":3,"file":"composi-core.js.map","sources":["../src/vnode.js","../src/vdom.js","../src/union.js","../src/constants.js","../src/h.js","../src/render.js","../src/runtime.js","../src/effects.js","../src/fragment.js"],"sourcesContent":["import { EMPTY_OBJECT, EMPTY_ARRAY, TEXT_NODE } from './constants'\n\n/**\n * @typedef {Object.<string, any> | {}} Props\n * @property {Children} Props.children\n */\n/**\n * @typedef {VNode[]} Children\n */\n/**\n * @typedef {string | number | Function} Type\n * @typedef {number | string | null} Key\n * @typedef {Object.<string, any>} VNode\n * @property {Type} VNode.type\n * @property {Props} VNode.props\n * @property {Children} VNode.children\n * @property {Element} VNode.node\n * @property {Key} [VNode.key]\n * @property {number} VNode.flag\n */\n/**\n * Create a virtual node with the provided properties.\n * @param {string | Function} type\n * @param {Props} props\n * @param {Children} children\n * @param {Element} node\n * @param {string | number | null} key\n * @param {number} [flag]\n * @return {VNode} VNode\n */\nexport function createVNode(\n  type,\n  props,\n  children,\n  node,\n  key = null,\n  flag = null\n) {\n  return {\n    type,\n    props,\n    children,\n    node,\n    flag,\n    key\n  }\n}\n\n/**\n * Create a virtual text node.\n * @param {string} value\n * @param {Element} [node]\n * @return {VNode} VNode\n */\nexport function createTextVNode(value, node) {\n  return createVNode(value, EMPTY_OBJECT, EMPTY_ARRAY, node, null, TEXT_NODE)\n}\n","import { RECYCLED_NODE, TEXT_NODE, EMPTY_OBJECT, LIFECYCLE } from './constants'\nimport { createTextVNode, createVNode } from './vnode'\n\nexport function mergeObjects(a, b) {\n  return Object.assign({}, a, b)\n}\n\nfunction listener(event) {\n  this.handlers[event.type](event)\n}\n/**\n * Update the properties and attributes of a VNode based on new data.\n * @param {Element} node\n * @param {string} prop\n * @param {any} oldValue\n * @param {any} newValue\n * @param {boolean} isSVG\n * @return {void} undefined\n */\nfunction patchProperty(node, prop, oldValue, newValue, isSVG) {\n  if (prop === 'key') {\n  } else if (prop === 'style' && typeof newValue === 'object') {\n    for (let i in mergeObjects(oldValue, newValue)) {\n      const style = newValue == null || newValue[i] == null ? '' : newValue[i]\n      if (i[0] === '-') {\n        node[prop].setProperty(i, style)\n      } else {\n        node[prop][i] = style\n      }\n    }\n  } else if (prop[0] === 'o' && prop[1] === 'n') {\n    if (\n      !((node['handlers'] || (node['handlers'] = {}))[\n        (prop = prop.slice(2).toLowerCase())\n      ] = newValue)\n    ) {\n      node.removeEventListener(prop, listener)\n    } else if (!oldValue) {\n      node.addEventListener(prop, listener)\n    }\n  } else if (\n    prop !== 'list' &&\n    prop !== 'form' &&\n    prop !== 'type' &&\n    prop !== 'draggable' &&\n    prop !== 'spellcheck' &&\n    prop in node &&\n    !isSVG\n  ) {\n    node[prop] = newValue == null ? '' : newValue\n  } else if (newValue == null || newValue === false) {\n    node.removeAttribute(prop)\n  } else {\n    node.setAttribute(prop, newValue)\n  }\n}\n\nfunction createNode(vnode, LIFECYCLE, isSVG) {\n  const node =\n    vnode.flag === TEXT_NODE\n      ? document.createTextNode(vnode.type)\n      : (isSVG = isSVG || vnode.type === 'svg') // eslint-disable-line no-cond-assign\n      ? document.createElementNS('http://www.w3.org/2000/svg', vnode.type)\n      : document.createElement(vnode.type)\n  const props = vnode.props\n  if (props.onmount) {\n    LIFECYCLE.push(function() {\n      props.onmount(node)\n    })\n  }\n\n  for (let k in props) {\n    patchProperty(node, k, null, props[k], isSVG)\n  }\n\n  for (let i = 0, len = vnode.children.length; i < len; i++) {\n    node.appendChild(createNode(vnode.children[i], LIFECYCLE, isSVG))\n  }\n\n  return (vnode.node = node)\n}\n\nfunction getKey(vnode) {\n  return vnode == null ? null : vnode.key\n}\n\nfunction removeChildren(vnode) {\n  for (let i = 0, length = vnode.children.length; i < length; i++) {\n    removeChildren(vnode.children[i])\n  }\n\n  const cb = vnode.props.ondestroy\n  if (cb != null) {\n    cb(vnode.node)\n  }\n\n  return vnode.node\n}\n\nfunction removeElement(parent, vnode) {\n  const remove = function() {\n    parent.removeChild(removeChildren(vnode))\n  }\n\n  const cb = vnode.props && vnode.props.onunmount\n  if (cb != null) {\n    cb(vnode.node, remove)\n  } else {\n    remove()\n  }\n}\n\nfunction patchNode(parent, node, oldVNode, newVNode, isSVG) {\n  if (oldVNode === newVNode) {\n  } else if (\n    oldVNode != null &&\n    oldVNode.flag === TEXT_NODE &&\n    newVNode.flag === TEXT_NODE\n  ) {\n    if (oldVNode.type !== newVNode.type) {\n      node.nodeValue = newVNode.type\n    }\n  } else if (oldVNode == null || oldVNode.type !== newVNode.type) {\n    node = parent.insertBefore(createNode(newVNode, LIFECYCLE, isSVG), node)\n    if (oldVNode != null) {\n      removeElement(parent, oldVNode)\n    }\n  } else {\n    let tmpVKid\n    let oldVKid\n\n    let oldKey\n    let newKey\n\n    const oldVProps = oldVNode.props\n    const newVProps = newVNode.props\n\n    const oldVKids = oldVNode.children\n    const newVKids = newVNode.children\n\n    let oldHead = 0\n    let newHead = 0\n    let oldTail = oldVKids.length - 1\n    let newTail = newVKids.length - 1\n\n    isSVG = isSVG || newVNode.type === 'svg'\n\n    for (let i in mergeObjects(oldVProps, newVProps)) {\n      if (\n        (i === 'value' || i === 'selected' || i === 'checked'\n          ? node[i]\n          : oldVProps[i]) !== newVProps[i]\n      ) {\n        patchProperty(node, i, oldVProps[i], newVProps[i], isSVG)\n        const cb = newVProps.onupdate\n        if (cb != null) {\n          LIFECYCLE.push(function() {\n            cb(node, oldVProps, newVProps)\n          })\n        }\n      }\n    }\n\n    while (newHead <= newTail && oldHead <= oldTail) {\n      if (\n        (oldKey = getKey(oldVKids[oldHead])) == null ||\n        oldKey !== getKey(newVKids[newHead])\n      ) {\n        break\n      }\n\n      patchNode(\n        node,\n        oldVKids[oldHead].node,\n        oldVKids[oldHead++],\n        newVKids[newHead++],\n        isSVG\n      )\n    }\n\n    while (newHead <= newTail && oldHead <= oldTail) {\n      if (\n        (oldKey = getKey(oldVKids[oldTail])) == null ||\n        oldKey !== getKey(newVKids[newTail])\n      ) {\n        break\n      }\n\n      patchNode(\n        node,\n        oldVKids[oldTail].node,\n        oldVKids[oldTail--],\n        newVKids[newTail--],\n        isSVG\n      )\n    }\n\n    if (oldHead > oldTail) {\n      while (newHead <= newTail) {\n        node.insertBefore(\n          createNode(newVKids[newHead++], LIFECYCLE, isSVG),\n          (oldVKid = oldVKids[oldHead]) && oldVKid.node\n        )\n      }\n    } else if (newHead > newTail) {\n      while (oldHead <= oldTail) {\n        removeElement(node, oldVKids[oldHead++])\n      }\n    } else {\n      let i, keyed, newKeyed\n      for (i = oldHead, keyed = {}, newKeyed = {}; i <= oldTail; i++) {\n        if ((oldKey = oldVKids[i].key) != null) {\n          keyed[oldKey] = oldVKids[i]\n        }\n      }\n\n      while (newHead <= newTail) {\n        oldKey = getKey((oldVKid = oldVKids[oldHead]))\n        newKey = getKey(newVKids[newHead])\n\n        if (\n          newKeyed[oldKey] ||\n          (newKey != null && newKey === getKey(oldVKids[oldHead + 1]))\n        ) {\n          if (oldKey == null) {\n            removeElement(node, oldVKid)\n          }\n          oldHead++\n          continue\n        }\n\n        if (newKey == null || oldVNode.flag === RECYCLED_NODE) {\n          if (oldKey == null) {\n            patchNode(\n              node,\n              oldVKid && oldVKid.node,\n              oldVKid,\n              newVKids[newHead],\n              isSVG\n            )\n            newHead++\n          }\n          oldHead++\n        } else {\n          if (oldKey === newKey) {\n            patchNode(node, oldVKid.node, oldVKid, newVKids[newHead], isSVG)\n            newKeyed[newKey] = true\n            oldHead++\n          } else {\n            if ((tmpVKid = keyed[newKey]) != null) {\n              patchNode(\n                node,\n                node.insertBefore(tmpVKid.node, oldVKid && oldVKid.node),\n                tmpVKid,\n                newVKids[newHead],\n                isSVG\n              )\n              newKeyed[newKey] = true\n            } else {\n              patchNode(\n                node,\n                oldVKid && oldVKid.node,\n                null,\n                newVKids[newHead],\n                isSVG\n              )\n            }\n          }\n          newHead++\n        }\n      }\n\n      while (oldHead <= oldTail) {\n        if (getKey((oldVKid = oldVKids[oldHead++])) == null) {\n          removeElement(node, oldVKid)\n        }\n      }\n\n      for (let i in keyed) {\n        if (newKeyed[i] == null) {\n          removeElement(node, keyed[i])\n        }\n      }\n    }\n  }\n\n  return (newVNode.node = node)\n}\n\nfunction recycleNode(node) {\n  return node.nodeType === TEXT_NODE\n    ? createTextVNode(node.nodeValue, node)\n    : createVNode(\n        node.nodeName.toLowerCase(),\n        EMPTY_OBJECT,\n        Array.prototype.map.call(node.childNodes, recycleNode),\n        node,\n        null,\n        RECYCLED_NODE\n      )\n}\n\nexport function patch(node, vdom) {\n  // if (JSON.stringify(vdom) === JSON.stringify(node.vdom)) return\n  if (!node.vdom) {\n    if (vdom.props.onmount) {\n      LIFECYCLE.push(function() {\n        vdom.props.onmount(node)\n      })\n    }\n  }\n  const vnode = (patchNode(\n    node.parentNode,\n    node,\n    node.vdom || recycleNode(node),\n    vdom\n  ).vdom = vdom)\n  while (LIFECYCLE.length > 0) LIFECYCLE.pop()()\n  return vnode\n}\n","const hasOwnProperty = Object.prototype.hasOwnProperty\n\n/**\n * Create a union of string tags.\n * @param {string[]} types\n */\nfunction createUnion(types) {\n  const variants = Object.create(null)\n  let checkTag = x => x && x.type\n\n  const matcher = (handlers, catchAll) => {\n    return (tag, context) => {\n      const tagType = checkTag(tag)\n      const match = hasOwnProperty.call(handlers, tagType) && handlers[tagType]\n      return match ? match(tag.data, context) : catchAll(context)\n    }\n  }\n\n  function match(tag, handlers, catchAll) {\n    return matcher(handlers, catchAll)(tag)\n  }\n\n  let idx = 0\n  while (idx < types.length) {\n    const type = types[idx]\n    variants[type] = data => ({ type, data })\n    idx++\n  }\n\n  return { variants, match }\n}\n\n/**\n * Create a union of types for matching up with functions. This is used to define actions for the `update` method of a runtime program.\n * @param {...string} types\n */\nexport function union(...types) {\n  const { variants, match } = createUnion(types)\n  variants.match = match\n  return variants\n}\n","/**\n * Used to determine if a vnode should be recycled.\n * @type {number}\n */\nexport const RECYCLED_NODE = 0\n\n/**\n * Used in a vnode to indicate that it is a DOM node.\n * @type {number}\n */\nexport const ELEMENT_NODE = 1\n\n/**\n * Used in a vnode to indicate that it is a text node.\n * @type {number}\n */\nexport const TEXT_NODE = 3\n\n/**\n * Namespace for SVG elements with `xlink:href` attributes.\n * @type {string}\n */\nexport const XLINK_NS = 'http://www.w3.org/1999/xlink'\n\n/**\n * Namespace for SVG elements.\n * @type {string}\n */\nexport const SVG_NS = 'http://www.w3.org/2000/svg'\n\n/**\n * An empty object. Used as placeholder for `props` in VNode.\n * @type {{}} EMPTY_OBJECT\n */\nexport const EMPTY_OBJECT = {}\n\n/**\n * An empty array. Used for access to array methods.\n * @type {any[]} EMPTY_ARRAY\n */\nexport const EMPTY_ARRAY = []\n\n/**\n * An array to store lifecycle hooks.\n * @type {any[]} LIFECYCLE\n */\nexport const LIFECYCLE = []\n","import { createVNode, createTextVNode } from './vnode'\n\n/**\n * Creates a virtual node representing an element node or text node to be created. This function must be imported into any file that contains JSX. Babel uses this function to convert JSX into JavaScript.\n * @typedef {import('./vnode').VNode} VNode\n * @param {string | Function} type\n * @param {Object.<string, any>} [props]\n * @return {VNode}\n */\nexport function h(type, props, ...children) {\n  props = props || {}\n  let node\n  const tempBox = []\n  const childNodes = []\n  let length = children.length\n  const key = props.key\n\n  while (length-- > 0) tempBox.push(children[length])\n\n  if (props.children) {\n    if (tempBox.length <= 0) {\n      tempBox.push(props.children)\n    }\n    delete props.children\n  }\n\n  while (tempBox.length > 0) {\n    if (Array.isArray((node = tempBox.pop()))) {\n      let length = node.length\n      while (length-- > 0) {\n        tempBox.push(node[length])\n      }\n    } else if (node === false || node === true || node == null) {\n    } else {\n      childNodes.push(typeof node === 'object' ? node : createTextVNode(node))\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type(props, childNodes)\n  } else {\n    return createVNode(type, props, childNodes, null, key)\n  }\n}\n","import { patch } from './vdom'\n\n/**\n * Render a functional component. The first argument is the component to render. This can be either a JSX tag or an `h` function. The second argument is the element to hydrate or update. During the first render, the target element is hydrated with the component provided. Further updates patch the existing element based on the virtual DOM.\n * @example\n *\n * ```\n * // Render Title tag into section:\n * render(<Title message='Hello World!'/>, 'section')\n * // Update the title component 5 seconds later:\n * setTimeout(() => {\n *   render(<Title message='Hello Everyone!'/>, 'section')\n * }, 5000)\n * ```\n * @typedef {import('./vnode').VNode} VNode\n * @param {VNode} vnode\n * @param {Element | string} target\n * @return {void} undefined\n */\nexport function render(vnode, target) {\n  if (Array.isArray(vnode)) {\n    throw 'Cannot insert Fragment tag directly into DOM.'\n  }\n  let oldTarget = ''\n  if (typeof target === 'string') {\n    oldTarget = target\n    target = document.querySelector(target)\n  }\n  if (!target) {\n    let msg = ''\n    if (oldTarget) msg = ` The selector you provided was: \"${oldTarget}\"`\n    console.error(\n      `@composi/core Error: The second parameter for render function was invalid. Check the selector you provided and make sure that it exists in the DOM before trying to render. ${msg}`\n    )\n  }\n  patch(target, vnode)\n}\n","/**\n * @typedef {Object<string, any>} Message\n * @property {string} Message.type\n * @property {any} [Message.data]\n * @typedef {(msg: Message) => Message} Send\n */\n/**\n * @typedef {any} State Simple or complex types for application state.\n */\n/**\n * @typedef {State | void} InitResult Return result of program init method.\n */\n/**\n * @typedef {Object<string, any>} Program A program to run.\n * @prop {() => InitResult} Program.init Method to set up initial state.\n * @prop {(state: State, send?: Send) => void} Program.view Method to present the current application state.\n * @prop {(state: State, msg?: Message, send?: Send) => any} Program.update Method to capture messages sent from view or subscriptions. According to the message, an action will transform application state and pass it the the program view method.\n * @prop {(getState: () => State, send: Send) => void} [Program.subscriptions] Method to run effects when the program starts. These run independently from the rest of the program.\n * @prop {(getState: () => State, send: Send) => void} [Program.subs] Shortcut for subscriptions.\n * @prop {(state: State) => void} [Program.done] Method to do clean up when shutting down a program.\n */\n/**\n * The @composi/runtime.\n * @example\n *\n * ```\n * // Create a runtime program\n * const program = {\n *   // Define state:\n *   init() {\n *     return [{count: 0}]\n *   },\n *   // Define view to render.\n *   // Notice event to send message 'incr'.\n *   view(state, send) {\n *      return render(<div onclick={send('incr')}>The count is: {state.count}</div>, document.body)\n *   },\n *   // Define action to update state:\n *   update(state, msg) {\n *     if (msg === 'incr') {\n *        return [state.count++]\n *     }\n *   }\n * }\n * // Run the program:\n * run(program)\n * ```\n * @param {Program} program A program to run with five methods: `init`, `view`, `update`, `subscriptions` and `done`.\n * @return {() => void} Function to terminate runtime.\n */\nexport function run(program) {\n  let init = program.init\n  const view = program.view\n  const update = program.update\n  const subscriptions = program.subscriptions || program.subs\n  const done = program.done\n  let state\n  let isRunning = true\n  let isFirstRun = true\n  const getState = () => state\n\n  /**\n   * Send a message.\n   * @param {Message} message\n   *\n   */\n  function send(message) {\n    if (isRunning) {\n      return updateView(update(state, message, send))\n    }\n  }\n\n  /**\n   * Expose send as static function on program object.\n   * This is to let you send messages to the program\n   * from other contexts, such as in a @composi/router action.\n   */\n  program['send'] = send\n\n  /**\n   * Handle changes to state and executing effects.\n   * @param {any} update\n   * @return {void} undefined\n   */\n  function updateView(update) {\n    if (update) {\n      state = update\n    } else if (init) {\n      state = init()\n    }\n    if (subscriptions && isFirstRun) {\n      if (typeof subscriptions === 'function') subscriptions(getState, send)\n      isFirstRun = false\n    }\n    view(state, send)\n  }\n  updateView(state)\n\n  /**\n   * Function to end runtime.\n   * @return {void} undefined\n   */\n  return () => {\n    if (isRunning) {\n      isRunning = false\n      if (done) {\n        done(state)\n      }\n    }\n  }\n}\n","/**\n * Function to batch effects together.\n * @param {...Function} effects\n * @return {Function} Function\n */\nexport const batchEffects = (...effects) => (state, send) =>\n  effects.map(effect => effect && effect(state, send))\n","/**\n * Returns a group of sibling elements for inclusion in another JSX tag.\n * @typedef {import('./vnode').VNode} VNode\n * @typedef {import('./vnode').Props} Props\n * @typedef {import('./vnode').Children} Children\n * @param {Props} props\n * @return {Children} children\n */\n/**\n * A tag to enable returning sibling elements. This is useful for returning list items to render in a list or table cells to render in a table row.\n * @example\n *\n * ```\n * <Fragment>\n *   <li>A</li>\n *   <li>B</li>\n *   <li>C</li>\n * </Fragment>\n ```\n * Or functionally:\n * ```\n * Fragment(null, [\n *   h('li', {}, 'A'),\n *   h('li', {}, 'B'),\n *   h('li', {}, 'C')\n * ])\n ```\n * @param {Object} [props] When using Fragment as a function, props is the first argument. Provide either null or {} as the value for props.\n * @param {Children} [children] The siblings to return with the Fragment. This will be an array of sibling elements.\n * @return {VNode[]} An array of virtual nodes.\n */\nexport const Fragment = (props, children) =>\n  Array.isArray(props) && !children ? props : children\n"],"names":["createVNode","type","props","children","node","key","flag","createTextVNode","value","EMPTY_OBJECT","EMPTY_ARRAY","mergeObjects","a","b","Object","assign","listener","event","handlers","patchProperty","prop","oldValue","newValue","isSVG","i","style","setProperty","slice","toLowerCase","addEventListener","removeEventListener","removeAttribute","setAttribute","createNode","vnode","LIFECYCLE","document","createTextNode","createElementNS","createElement","k","onmount","push","len","length","appendChild","getKey","removeChildren","cb","ondestroy","removeElement","parent","remove","removeChild","onunmount","patchNode","oldVNode","newVNode","nodeValue","insertBefore","tmpVKid","oldVKid","oldKey","newKey","oldVProps","newVProps","oldVKids","newVKids","oldHead","newHead","oldTail","newTail","onupdate","keyed","newKeyed","recycleNode","nodeType","nodeName","Array","prototype","map","call","childNodes","patch","vdom","parentNode","pop","createUnion","types","variants","create","checkTag","x","matcher","catchAll","tag","context","tagType","match","hasOwnProperty","data","idx","tempBox","isArray","target","oldTarget","querySelector","msg","console","error","program","send","message","isRunning","updateView","update","state","init","subscriptions","isFirstRun","getState","view","subs","done","effects","effect"],"mappings":"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"}