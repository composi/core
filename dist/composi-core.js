(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.composi={})})(this,function(a){"use strict";function b(a,b,c,d){var e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:null,f=5<arguments.length&&arguments[5]!==void 0?arguments[5]:null;return{type:a,props:b,children:c,node:d,flag:f,key:e}}function c(a,c){return b(a,t,u,c,null,3)}function d(c,a){return Object.assign({},c,a)}function e(a){this.handlers[a.type](a)}function f(a,b,c,f,g){if("key"===b);else if("style"===b&&"object"==typeof f)for(var h in d(c,f)){var i=null==f||null==f[h]?"":f[h];"-"===h[0]?a[b].setProperty(h,i):a[b][h]=i}else"o"===b[0]&&"n"===b[1]?((a.handlers||(a.handlers={}))[b=b.slice(2).toLowerCase()]=f)?!c&&a.addEventListener(b,e):a.removeEventListener(b,e):!g&&"list"!==b&&b in a?a[b]=null==f?"":f:null==f||!1===f?a.removeAttribute(b):a.setAttribute(b,f)}function g(a,b,c){var d=3===a.flag?document.createTextNode(a.type):(c=c||"svg"===a.type)?document.createElementNS("http://www.w3.org/2000/svg",a.type):document.createElement(a.type),e=a.props;for(var h in e.onmount&&b.push(function(){e.onmount(d)}),e)f(d,h,null,e[h],c);for(var j=0,k=a.children.length;j<k;j++)d.appendChild(g(a.children[j],b,c));return a.node=d}function h(a){return null==a?null:a.key}function j(a){for(var b=0,c=a.children.length;b<c;b++)j(a.children[b]);var d=a.props.ondestroy;return null!=d&&d(a.node),a.node}function k(a,b){var c=function(){a.removeChild(j(b))},d=b.props&&b.props.onunmount;null==d?c():d(b.node,c)}function l(a,b,c,e,j){if(c===e);else null!=c&&3===c.flag&&3===e.flag?c.type!==e.type&&(b.nodeValue=e.type):null==c||c.type!==e.type?(b=a.insertBefore(g(e,v,j),b),null!=c&&k(a,c)):function(){var a,m,n,o,p=c.props,q=e.props,r=c.children,s=e.children,t=0,u=0,w=r.length-1,x=s.length-1;for(var y in j=j||"svg"===e.type,d(p,q))("value"==y||"selected"==y||"checked"==y?b[y]:p[y])!==q[y]&&function(){f(b,y,p[y],q[y],j);var a=q.onupdate;null!=a&&v.push(function(){a(b,p,q)})}();for(;u<=x&&t<=w&&null!=(n=h(r[t]))&&n===h(s[u]);)l(b,r[t].node,r[t++],s[u++],j);for(;u<=x&&t<=w&&null!=(n=h(r[w]))&&n===h(s[x]);)l(b,r[w].node,r[w--],s[x--],j);if(t>w)for(;u<=x;)b.insertBefore(g(s[u++],v,j),(m=r[t])&&m.node);else if(u>x)for(;t<=w;)k(b,r[t++]);else{var i,z,A;for(i=t,z={},A={};i<=w;i++)null!=(n=r[i].key)&&(z[n]=r[i]);for(;u<=x;){if(n=h(m=r[t]),o=h(s[u]),A[n]||null!=o&&o===h(r[t+1])){null==n&&k(b,m),t++;continue}null==o||0===c.flag?(null==n&&(l(b,m&&m.node,m,s[u],j),u++),t++):(n===o?(l(b,m.node,m,s[u],j),A[o]=!0,t++):null==(a=z[o])?l(b,m&&m.node,null,s[u],j):(l(b,b.insertBefore(a.node,m&&m.node),a,s[u],j),A[o]=!0),u++)}for(;t<=w;)null==h(m=r[t++])&&k(b,m);for(var B in z)null==A[B]&&k(b,z[B])}}();return e.node=b}function m(a){return a.nodeType===3?c(a.nodeValue,a):b(a.nodeName.toLowerCase(),t,Array.prototype.map.call(a.childNodes,m),a,null,0)}function n(a,b){for(var c=l(a.parentNode,a,a.vdom||m(a),b).vdom=b;0<v.length;)v.pop()();return c}function o(a,b){return p(a)||q(a,b)||r()}function p(a){if(Array.isArray(a))return a}function q(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(a){for(var b=Object.create(null),c=a=>a&&a.type,d=(a,b)=>(d,e)=>{var f=c(d),g=w.call(a,f)&&a[f];return g?g(d.data,e):b(e)},e=0,f=function(){var c=a[e];b[c]=a=>({type:c,data:a}),e++};e<a.length;)f();return{variants:b,match:function(a,b,c){return d(b,c)(a)}}}var t={},u=[],v=[],w=Object.prototype.hasOwnProperty;a.h=function(a,d){d=d||{};for(var e,f=[],g=[],h=arguments.length,i=Array(2<h?h-2:0),j=2;j<h;j++)i[j-2]=arguments[j];for(var k=i.length,l=d.key;0<k--;)f.push(i[k]);for(d.children&&(0>=f.length&&f.push(d.children),delete d.children);0<f.length;)if(Array.isArray(e=f.pop()))for(var m=e.length;0<m--;)f.push(e[m]);else if(!1===e||!0===e||null==e);else g.push("object"==typeof e?e:c(e));return"function"==typeof a?a(d,g):b(a,d,g,null,l)},a.render=function(a,b){var c="";if("string"==typeof b&&(c=b,b=document.querySelector(b)),!b){var d="";c&&(d=` The selector you provided was: "${c}"`),console.error(`@composi/core Error: The second parameter for render function was invalid. Check the selector you provided and make sure that it exists in the DOM before trying to render. ${d}`)}n(b,a)},a.run=function(a){function b(a){if(k)return c(h(d,a,b))}function c(a){if(a){var c=o(a,2);d=c[0],e=c[1]}else if(f&&f.length){var h=o(f,2);d=h[0],e=h[1],i&&l&&("function"==typeof i&&i(m,b),l=!1)}else d=[];e&&e(d,b),g(d,b)}var d,e,f=a.init(),g=a.view,h=a.update,i=a.subscriptions||a.subs,j=a.done,k=!0,l=!0,m=()=>d;return a.send=b,c(d),()=>{k&&(k=!1,j&&j(d))}},a.union=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=s(b),e=d.variants,f=d.match;return e.match=f,e},a.batchEffects=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(a,c)=>b.map(b=>b&&b(a,c))},a.Fragment=(a,b)=>Array.isArray(a)&&!b?a:b,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=composi-core.js.map
